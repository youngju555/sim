#ì „ ë‚  ì œì‘í•œ RCì¹´ì˜ ìˆ˜ì • ì™„ì„±ë³¸
# ì•„ë‘ì´ë…¸ 10ë²ˆ í•€ì— ë¬¸ì œ ë°œìƒ. ë¬¸ì œ ì›ì¸ì„ ì°¾ê¸° ìœ„í•´ ì°¨ë¡€ì°¨ë¡€ ê²€í†  ê³¼ì • ê±°ì¹¨. 
# 1. ëª¨í„°ì˜ ë¬¸ì œ? > ì„  ì—°ê²°ì„ ë°”ê¿”ì„œ êµ¬ë™ì‹œí‚¤ë©° ëª¨í„°ì˜ ë¬¸ì œê°€ ì•„ë‹Œê²ƒì„ íŒŒì•…í•¨. 2. ëª¨í„° ë“œë¼ì´ë²„ì˜ ë¬¸ì œ? > ëª¨í„° ë“œë¼ì´ë²„ì˜ ì„ ì„ ë°”ê¿”ê°€ë©° íŒŒì•…í•œ ê²°ê³¼
# ê²°í•©ì´ í—ê²ë‹¤ëŠ” ë¬¸ì œ íŒŒì•…. ê·¸ëŸ¬ë‚˜ ê³ ì³ì§€ì§€ ì•Šì•˜ìŒ  3. ì•„ë‘ì´ë…¸? > ì•„ë‘ì´ë…¸ ì—°ê²° ì„ ì„ ë°”ê¿”ë¼ë©° ì•Œì•„ë³¸ ê²°ê³¼ ì•„ë‘ì´ë…¸ 10ë²ˆ í•€ì— ì˜¤ë¥˜ê°€ ìˆë‹¤ëŠ” ê²ƒì„ íŒŒì•…í•¨.

# <ì•„ë‘ì´ë…¸ ì™„ì„± ì½”ë“œ>

#include <Servo.h>

// í•€ ì •ì˜
#define SERVO_PIN 9
#define BUZZER 13
#define ULTRASONIC_TRIG 12
#define ULTRASONIC_ECHO 7
#define MOTOR_LEFT_1 5
#define MOTOR_LEFT_2 6
#define MOTOR_RIGHT_1 3
#define MOTOR_RIGHT_2 11

// PWM ì†ë„ ì„¤ì •
#define SPEED_LEFT 180
#define SPEED_RIGHT 170

Servo swatter;
char command = 'S';  // ê¸°ë³¸ ëª…ë ¹ì€ ì •ì§€
long duration;
int distance;

void setup() {
  Serial.begin(9600);
  swatter.attach(SERVO_PIN);
  swatter.write(90);

  pinMode(BUZZER, OUTPUT);
  pinMode(ULTRASONIC_TRIG, OUTPUT);
  pinMode(ULTRASONIC_ECHO, INPUT);
  pinMode(MOTOR_LEFT_1, OUTPUT);
  pinMode(MOTOR_LEFT_2, OUTPUT);
  pinMode(MOTOR_RIGHT_1, OUTPUT);
  pinMode(MOTOR_RIGHT_2, OUTPUT);

  delay(2000);
  stopMotors();
}

void loop() {
  if (Serial.available()) {
    char temp = Serial.read();
    if (temp == 'F' || temp == 'B' || temp == 'L' || temp == 'R' || temp == 'S') {
      command = temp;
    }
  }

  switch (command) {
    case 'F': moveForward(); break;
    case 'B': moveBackward(); break;
    case 'L': turnLeft(); break;
    case 'R': turnRight(); break;
    case 'S': stopMotors(); break;
  }

  distance = getDistance();
  if (distance > 0 && distance < 30) {
    alertAndSwat();
  }

  delay(50);
}

// ğŸŸ¢ ëª¨í„° ì œì–´ í•¨ìˆ˜ë“¤ (ì „ë¶€ analogWriteë¡œ ë³€ê²½)
void moveForward() {
  analogWrite(MOTOR_LEFT_1, SPEED_LEFT); analogWrite(MOTOR_LEFT_2, 0);
  analogWrite(MOTOR_RIGHT_1, 0); analogWrite(MOTOR_RIGHT_2, SPEED_RIGHT);
}

void moveBackward() {
  analogWrite(MOTOR_LEFT_1, 0); analogWrite(MOTOR_LEFT_2, SPEED_LEFT);
  analogWrite(MOTOR_RIGHT_1, SPEED_RIGHT); analogWrite(MOTOR_RIGHT_2, 0);
}

void turnLeft() {
  analogWrite(MOTOR_LEFT_1, 0); analogWrite(MOTOR_LEFT_2, SPEED_LEFT);
  analogWrite(MOTOR_RIGHT_1, 0); analogWrite(MOTOR_RIGHT_2, SPEED_RIGHT);
}

void turnRight() {
  analogWrite(MOTOR_LEFT_1, SPEED_LEFT); analogWrite(MOTOR_LEFT_2, 0);
  analogWrite(MOTOR_RIGHT_1, SPEED_RIGHT); analogWrite(MOTOR_RIGHT_2, 0);
}

void stopMotors() {
  analogWrite(MOTOR_LEFT_1, 0); analogWrite(MOTOR_LEFT_2, 0);
  analogWrite(MOTOR_RIGHT_1, 0); analogWrite(MOTOR_RIGHT_2, 0);
}

// ğŸŸ¡ ì´ˆìŒíŒŒ ê±°ë¦¬ ì¸¡ì •
int getDistance() {
  digitalWrite(ULTRASONIC_TRIG, LOW);
  delayMicroseconds(2);
  digitalWrite(ULTRASONIC_TRIG, HIGH);
  delayMicroseconds(10);
  digitalWrite(ULTRASONIC_TRIG, LOW);

  duration = pulseIn(ULTRASONIC_ECHO, HIGH, 30000);
  return duration * 0.034 / 2;
}

// ğŸ”´ íŒŒë¦¬ì±„ + ë¶€ì € ë™ì‘
void alertAndSwat() {
  tone(BUZZER, 1000, 300);
  swatter.write(0);
  delay(300);
  swatter.write(90);
  delay(500);
}




<esp ì½”ë“œ>
#include "BluetoothSerial.h"
BluetoothSerial SerialBT;
#define ARDUINO_TX 17  // ESP32 â†’ Arduino (TX)
#define ARDUINO_RX 16  // ESP32 â† Arduino (RX)
HardwareSerial ArduinoSerial(2); // Serial2
void setup() {
  Serial.begin(115200);
  SerialBT.begin("ESP32_BT_Car"); // ë¸”ë£¨íˆ¬ìŠ¤ ì¥ì¹˜ ì´ë¦„
  Serial.println("Bluetooth Started. Waiting for commands...");
  // Serial2 ì´ˆê¸°í™”: TX, RX í•€, Baudrate
  ArduinoSerial.begin(9600, SERIAL_8N1, ARDUINO_RX, ARDUINO_TX);
}
void loop() {
  // ìŠ¤ë§ˆíŠ¸í° â†’ ESP32
  if (SerialBT.available()) {
    char cmd = SerialBT.read();
    Serial.print("BT Command: ");
    Serial.println(cmd);
    // ESP32 â†’ Arduino ì „ë‹¬
    ArduinoSerial.write(cmd);
  }
  // Arduino â†’ ESP32ë¡œ ì˜¤ëŠ” ë°ì´í„°ë„ (ë””ë²„ê¹…ìš©ìœ¼ë¡œ)
  if (ArduinoSerial.available()) {
    char c = ArduinoSerial.read();
    Serial.print("Arduino says: ");
    Serial.println(c);
  }
}
